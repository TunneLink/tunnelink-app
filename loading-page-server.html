<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>TunneLink</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="stylesheet.css">
        <link rel="icon" href="TunneLink logo.png" type="image/png">
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
            rel="stylesheet">
    </head>

    <body style="background-color: #28313d;">
        <div class="container center-animation">
            <div class="track"></div>
            <div class="train">
              <div class="carOne"></div>
              <div class="carTwo"></div>
              <div class="carThree"></div>
            </div>
            </ul>
            <div class="tunnel"></div> <!-- Tunnel element -->
        <div class="curved-line"></div>
          </div>
        </div>
            <h1 class="center-loading red-hat-display-normal small"
                style="color: aliceblue;">LOADING...</h1>

        <script>
        // Simulating backend signal for polling (this part will be on the backend, replace with actual server-side code)
        let simulatedSignal = null; // Change this on your backend to simulate receiving the signal.

        // Function to check the signal from the backend
        async function checkBackendSignal() {
            try {
                // Simulate a fetch request to your backend
                const response = await fetch('http://localhost:3001/test'); // Replace with your actual backend API endpoint
                const data = await response.json();

                // Assign the loadingServer value from the response to a variable
                const loadingCode = data.loadingServer; // Assign the loadingServer value to loadingCode

                // Use the loadingCode value to decide where to redirect
                if (loadingCode === 'success') { 
                    window.location.href = "server-page.html"; // Redirect to success page
                } else if (loadingCode === 'error') {
                    window.location.href = "server-page-error-code.html"; // Redirect to error page
                }
            } catch (error) {
                console.error('Error checking backend signal:', error);
            }
        }

        // Polling function to continuously check for the signal
        function pollForSignal() {
            // Poll every 3 seconds (3000 ms)
            setInterval(checkBackendSignal, 3000);
        }

        // Initialize the polling on page load
        window.onload = pollForSignal;
        </script>
    </body>
    
</html>